<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>小羅盤｜管理導航系統</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap" rel="stylesheet">

<style>
:root{
--bg:#D8DCDD;
--line:#C8C0BE;
--accent:#F6D494;
}
body{
background:var(--bg);
font-family:'Zen Maru Gothic', sans-serif;
}
.hard-shadow{
box-shadow:4px 4px 0 var(--line);
border:2px solid var(--line);
}
.page{display:none;min-height:100vh;}
.page.active{display:block;}
.title-font{font-weight:900;}
.month-btn{
padding:8px 14px;
border:2px solid var(--line);
border-radius:12px;
background:white;
cursor:pointer;
}
.month-btn.active{
background:var(--accent);
}
</style>
</head>

<body class="pb-24">

<nav id="top-nav" class="hidden sticky top-0 bg-white/80 backdrop-blur p-4 flex items-center border-b">
<button onclick="goBack()" class="hard-shadow px-3 py-1 bg-white">←</button>
<span id="nav-title" class="ml-4 font-black"></span>
</nav>

<!-- 首頁 -->
<div id="home" class="page active p-6">
<h1 class="text-4xl title-font mb-6">小羅盤</h1>

<div class="grid grid-cols-2 gap-4">

<div class="col-span-2 bg-[#F6D494] p-6 rounded-3xl hard-shadow cursor-pointer"
onclick="openPage('daily','今日行程')">
<h2 class="title-font">今日行程</h2>
<div id="live-task" class="text-xl mt-2"></div>
</div>

<div class="bg-white p-5 rounded-3xl hard-shadow cursor-pointer"
onclick="openPage('yearly','年度行程')">年度行程</div>

</div>
</div>

<!-- 今日行程 -->
<div id="daily" class="page p-6">
<h2 class="title-font text-2xl mb-4">現在該做什麼？</h2>
<div id="daily-content" class="text-lg leading-relaxed"></div>
</div>

<!-- 年度行程 -->
<div id="yearly" class="page p-6">
<h2 class="title-font text-2xl mb-4">年度行程</h2>
<div id="month-tabs" class="flex flex-wrap gap-2 mb-6"></div>
<div id="month-content" class="space-y-3"></div>
</div>

<script>

/* ======================
   年度行程完整資料
====================== */

const annualSchedule = {
1:[
"確認總部活動",
"平日/週六考前加強",
"考前一週/考試當週：考卷90以上抽獎",
"期末考：95分以上3張/100分以上2張→兌換獎品",
"榜單印製",
"確認寒假英文/數學上課時間→寒假前兩週公告家長",
"確認下學期自修評量，聯繫書商",
"冬令營招生",
"冬令營名單確定",
"LINE調整為冬令營選單",
"寒假期間FB每天發文"
],
2:[
"確認總部活動",
"寒假期間FB每天發文",
"新學期安親課輔招生",
"確認下學期英文/數學上課時間→寒假最後一週公告家長",
"寒假最後一天設定預約訊息提醒開學",
"LINE調整為學期中選單",
"開學第一天下載安親檔案並通知老師",
"提醒長興/西勢國小學生交行事曆"
],
3:[
"確認總部活動",
"舉辦家長說明會→確認日期後FB宣傳",
"英文繪本班/小一正音班籌備開課",
"國小運動會進校園招生",
"馬不停蹄地招生"
],
4:[
"確認總部活動",
"英文繪本班/小一正音班開課",
"平日/週六考前加強",
"考前一週/考試當週：考卷90以上抽獎",
"期中考：95分以上3張/100分以上2張→兌換獎品",
"榜單印製",
"馬不停蹄地招生"
],
5:[
"確認總部活動",
"第一週：討論夏令營課表",
"第二週：確定夏令營課表",
"第三週：請總部設計宣傳單",
"第四週：夏令營宣傳（發文、貼通知單）"
],
6:[
"確認總部活動",
"平日/週六考前加強",
"考前一週/考試當週：考卷90以上抽獎",
"期末考：95分以上3張/100分以上2張→兌換獎品",
"榜單印製",
"確認暑假自修評量，聯繫書商",
"確認暑假英文/數學上課時間→暑假前兩週公告家長",
"夏令營招生",
"夏令營名單確定",
"LINE調整為夏令營選單"
],
7:[
"確認總部活動",
"暑假期間FB每天發文",
"提醒英文老師完成總部朗讀/演講活動"
],
8:[
"確認總部活動",
"確認下學期自修評量，聯繫書商",
"新學期安親課輔招生",
"確認下學期英文/數學上課時間→暑假最後一週公告家長",
"暑假最後一天提醒家長即將開學",
"LINE調整為學期中選單"
],
9:[
"確認總部活動",
"開學第一天下載安親檔案並通知老師",
"提醒長興/西勢/崑山國小學生交行事曆",
"開會討論萬聖節是否舉辦活動"
],
10:[
"確認總部活動",
"平日/週六考前加強",
"考前一週/考試當週：考卷90以上抽獎",
"期中考：95分以上3張/100分以上2張→兌換獎品",
"榜單印製",
"萬聖節活動"
],
11:[
"確認總部活動",
"第一週：討論冬令營課表/確認聖誕節活動",
"第二週：確定冬令營課表",
"第三週：請總部設計宣傳單",
"第四週：冬令營宣傳（發文、貼通知單）"
],
12:[
"確認總部活動",
"聖誕節活動宣傳",
"馬不停蹄地招生（冬令營）",
"聖誕節活動",
"元旦放假FB發文"
]
};

let currentMonth=new Date().getMonth()+1;

function renderMonths(){
let html="";
for(let i=1;i<=12;i++){
html+=`<button class="month-btn ${i===currentMonth?'active':''}" 
onclick="selectMonth(${i})">${i}月</button>`;
}
document.getElementById("month-tabs").innerHTML=html;
renderMonthContent();
}

function selectMonth(month){
currentMonth=month;
renderMonths();
}

function renderMonthContent(){
let events=annualSchedule[currentMonth]||[];
let html="";
events.forEach(e=>{
html+=`<div class="bg-white p-4 rounded-xl hard-shadow">${e}</div>`;
});
document.getElementById("month-content").innerHTML=html;
}

renderMonths();

/* ======================
   今日行程完整原版邏輯
====================== */

function getTodaySchedule() {
const now = new Date();
const hour = now.getHours();
const minute = now.getMinutes();
const totalMinutes = hour * 60 + minute;
const day = now.getDay();

function between(sh, sm, eh, em){
const start = sh*60+sm;
const end = eh*60+em;
return totalMinutes >= start && totalMinutes < end;
}

if (between(0,0,12,30)) return "休息時間";

if (between(12,30,13,0)) {
return `① 打掃騎樓<br>
② 確認孩子都有進班，未出現記得通知家長`;
}

if (between(13,0,13,30)) return "整理今日待辦事項";

if (between(14,0,16,0)) {
let text="行政工作";
if(day===5) text+="<br>＋準備下週晚餐單";
return text;
}

if (between(16,0,16,30)) {
return `① 準備點心<br>
② 確認孩子都有進班<br>
③ 提醒老師傳晚餐單`;
}

if (hour===16 && minute>=30 && minute<40) return "訂晚餐";
if (hour===16 && minute>=40 && minute<60) return "倒垃圾";

if (between(17,0,20,0)) {
return `① 叫學生回家<br>
② 行政工作<br>
③ 打掃`;
}

if (between(20,0,20,30)) {
return `① 晚餐費用清點<br>
② 隔日待辦事項記錄`;
}

if (between(20,30,23,59)) return "休息時間";

return "—";
}

function tick(){
const content=getTodaySchedule();
document.getElementById("live-task").innerHTML=content;
document.getElementById("daily-content").innerHTML=content;
}

tick();
setInterval(tick,60000);

/* 頁面切換 */

let historyStack=["home"];

function openPage(id,title){
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
document.getElementById(id).classList.add("active");
document.getElementById("top-nav").classList.remove("hidden");
document.getElementById("nav-title").innerText=title||"";
historyStack.push(id);
}

function goBack(){
historyStack.pop();
const prev=historyStack.pop();
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
document.getElementById(prev).classList.add("active");
}

</script>

</body>
</html>
